<?xml version="1.0"?>
<html>
  <head>
    <script type="text/javascript"><![CDATA[(function(){var t="object"==typeof this.global?this.global:this;t.JS=t.JS||{},JS.ENV=t})(),JS.Package=function(t){var e=JS.Package.OrderedSet;JS.Package._5(this),this._0=t,this._2=new e,this._6=new e,this._d=new e,this._e=new e,this._3={},this._7={}},function(t){t.displayName="Package",t.toString=function(){return t.displayName},t.log=function(t){"undefined"!=typeof window&&("object"==typeof window.runtime&&window.runtime.trace(t),window.console&&console.info&&console.info(t))};var e=t.OrderedSet=function(t){if(this._f=this.list=[],this._5={},t)for(var e=0,i=t.length;i>e;e++)this.push(t[e])};e.prototype.push=function(t){var e=void 0!==t.id?t.id:t,i=this._5;i.hasOwnProperty(e)||(i[e]=this._f.length,this._f.push(t))};var i=t.Deferred=function(){this._g="deferred",this._h=null,this._i=[]};i.prototype.callback=function(t,e){"succeeded"===this._g?t.call(e,this._h):this._i.push([t,e])},i.prototype.succeed=function(t){this._g="succeeded",this._h=t;for(var e;e=this._i.shift();)e[0].call(e[1],t)},t.ENV=JS.ENV,t.onerror=function(t){throw t},t._j=function(e){t.onerror(Error(e))};for(var n=t.prototype,r=[["requires","_6"],["uses","_d"],["styling","_e"]],s=r.length;s--;)(function(t){var e=t[0],i=t[1];n[e]=function(){var t,e=arguments.length;for(t=0;e>t;t++)this[i].push(arguments[t]);return this}})(r[s]);n.provides=function(){var e,i=arguments.length;for(e=0;i>e;e++)this._2.push(arguments[e]),t._8(arguments[e]).pkg=this;return this},n.setup=function(t){return this._k=t,this},n._r=function(t,e,i){if(this._7[t])return e.call(i);var n=this._3[t]=this._3[t]||[];n.push([e,i]),this._s()},n._1=function(t){if(this._7[t])return!1;this._7[t]=!0;var e=this._3[t];if(!e)return!0;delete this._3[t];for(var i=0,n=e.length;n>i;i++)e[i][0].call(e[i][1]);return!0},n._l=function(e){if(!e&&void 0!==this.__isLoaded)return this.__isLoaded;for(var i,n,r=this._2.list,s=r.length;s--;)if(i=r[s],n=t._4(i,this._m),void 0===n)return e?t._j("Expected package at "+this._0+" to define "+i):this.__isLoaded=!1;return this.__isLoaded=!0},n._s=function(){if(this._1("request")){this._t();var e=this._6.list.concat(this._d.list),i=this._9||[],n=(this._0||{}).length,r=this;t.when({load:e}),t.when({complete:this._6.list},function(){t.when({complete:e,load:[this]},function(){this._1("complete")},this);var s=function(e){if(0===n)return a(e);n-=1;var o=r._0.length-n-1;t.Loader.loadFile(r._0[o],s,i[o])},a=function(t){r._m=t,r._k&&r._k(),r._l(!0),r._1("load")};if(this._l())return this._1("download"),this._1("load");if(void 0===this._0)return t._j("No load path found for "+this._2.list[0]);if("function"==typeof this._0?this._0(a):s(),t.Loader.loadStyle){for(var o=this._e.list,l=o.length;l--;)t.Loader.loadStyle(o[l]);this._1("download")}},this)}},n._t=function(){if(!this._9&&this._0 instanceof Array&&t.Loader.fetch){this._9=[];for(var e=0,i=this._0.length;i>e;e++)this._9[e]=t.Loader.fetch(this._0[e])}},n.toString=function(){return"Package:"+this._2.list.join(",")},t.when=function(e,i,n){var r,s,a,o=[],l={};for(r in e)if(e.hasOwnProperty(r))for(l[r]=[],s=new t.OrderedSet(e[r]),a=s.list.length;a--;)o.push([r,s.list[a],a]);var c=a=o.length;if(0===c)return i&&i.call(n,l);for(;a--;)(function(e){var r=t._a(e[1]);r._r(e[0],function(){l[e[0]][e[2]]=t._4(e[1],r._m),c-=1,0===c&&i&&i.call(n,l)})})(o[a])},t._n=1,t._b={},t._c={},t._o=[],t._5=function(t){t.id=this._n,this._n+=1},t._p=function(t){var e=""+t,i=this._b[e];return i?i:("string"==typeof t&&(t=[].slice.call(arguments)),i=this._b[e]=new this(t))},t._a=function(t){if("string"!=typeof t)return t;var e=this._8(t);if(e.pkg)return e.pkg;var i=this._u(t);if(i)return i;var n=new this;return n.provides(t),n},t.remove=function(t){var e=this._a(t);delete this._c[t],delete this._b[e._0]},t._v=function(t,e){this._o.push([t,e])},t._u=function(t){var e,i,n,r=this._o,s=r.length;for(e=0;s>e;e++)if(i=r[e],i[0].test(t)){n=i[1].from+"/"+t.replace(/([a-z])([A-Z])/g,function(t,e,i){return e+"_"+i}).replace(/\./g,"/").toLowerCase()+".js";var a=new this([n]);return a.provides(t),(n=i[1].require)&&a.requires(t.replace(i[0],n)),a}return null},t._8=function(t){return this._c[t]=this._c[t]||{}},t._4=function(t,e){if("string"!=typeof t)return void 0;var i=e?{}:this._8(t);if(void 0!==i.obj)return i.obj;for(var n,r=e||this.ENV,s=t.split(".");n=s.shift();)r=r&&r[n];return e&&void 0===r?this._4(t):i.obj=r}}(JS.Package),JS.Package.DomLoader={HOST_REGEX:/^https?\:\/\/[^\/]+/i,usable:function(){return!!JS.Package._4("window.document.getElementsByTagName")},__FILE__:function(){var t=document.getElementsByTagName("script");return src=t[t.length-1].src,url=window.location.href,/^\w+\:\/+/.test(src)?src:/^\//.test(src)?window.location.origin+src:url.replace(/[^\/]*$/g,"")+src},cacheBust:function(t){var e=(new Date).getTime();return t+(/\?/.test(t)?"&":"?")+e},fetch:function(t){var e=t;JS.cacheBust&&(t=this.cacheBust(t)),this.HOST=this.HOST||this.HOST_REGEX.exec(window.location.href);var i=this.HOST_REGEX.exec(t);if(!this.HOST||i&&i[0]!==this.HOST[0])return null;JS.Package.log("Loading "+t);var n=new JS.Package.Deferred,r=this,s=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;return s.open("GET",t,!0),s.onreadystatechange=function(){4===s.readyState&&(s.onreadystatechange=r._q,n.succeed(s.responseText+"\n//@ sourceURL="+e),s=null)},s.send(null),n},loadFile:function(c,d,h){JS.cacheBust&&!h&&(c=this.cacheBust(c));var f=this,i=document.getElementsByTagName("head")[0],g=document.createElement("script");return g.type="text/javascript",h?h.callback(function(code){JS.Package.log("Executing "+c),eval(code),d()}):(JS.Package.log("Loading and executing "+c),g.src=c,g.onload=g.onreadystatechange=function(){var t=g.readyState,e=g.status;(!t||"loaded"===t||"complete"===t||4===t&&200===e)&&(d(),g.onload=g.onreadystatechange=f._q,i=null,g=null)},i.appendChild(g),void 0)},loadStyle:function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},_q:function(){}},JS.Package.Loader=JS.Package.DomLoader,JS.Package.DSL={__FILE__:function(){return JS.Package.Loader.__FILE__()},pkg:function(t,e){var i=e?JS.Package._p(e):JS.Package._a(t);return i.provides(t),i},file:function(){return JS.Package._p.apply(JS.Package,arguments)},load:function(t,e){JS.Package.Loader.loadFile(t,e)},autoload:function(t,e){JS.Package._v(t,e)}},JS.Package.DSL.files=JS.Package.DSL.file,JS.Package.DSL.loader=JS.Package.DSL.file,JS.Packages=function(t){t.call(JS.Package.DSL)},JS.cacheBust=!1,JS.load=function(t,e){return JS.Package.Loader.loadFile(t,function(){"function"==typeof e&&e()}),this},JS.require=function(){for(var t=[],e=0;"string"==typeof arguments[e];)t.push(arguments[e]),e+=1;var i=arguments[e],n=arguments[e+1];return JS.Package.when({complete:t},function(t){i&&i.apply(n||null,t&&t.complete)}),this},JS.Packages(function(){with(this){JS.Package.ENV.JSCLASS_PATH=JS.Package.ENV.JSCLASS_PATH||__FILE__().replace(/[^\/]*$/g,"");var b=JS.Package.ENV.JSCLASS_PATH;/\/$/.test(b)||(b+="/");var c=function(t){return file(b+t+".js")};c("core").provides("JS.Module","JS.Class","JS.Method","JS.Kernel","JS.Singleton","JS.Interface");var d="JS.Test.Unit";c("test").provides("JS.Test","JS.Test.Context","JS.Test.Mocking","JS.Test.FakeClock","JS.Test.AsyncSteps","JS.Test.Helpers",d,d+".Assertions",d+".TestCase",d+".TestSuite",d+".TestResult").requires("JS.Module","JS.Class","JS.Console","JS.DOM","JS.Enumerable","JS.SortedSet","JS.Comparable","JS.StackTrace").styling(b+"assets/testui.css"),c("dom").provides("JS.DOM","JS.DOM.Builder").requires("JS.Class"),c("console").provides("JS.Console").requires("JS.Module","JS.Enumerable"),c("benchmark").provides("JS.Benchmark").requires("JS.Module").requires("JS.Console"),c("comparable").provides("JS.Comparable").requires("JS.Module"),c("constant_scope").provides("JS.ConstantScope").requires("JS.Module"),c("forwardable").provides("JS.Forwardable").requires("JS.Module"),c("enumerable").provides("JS.Enumerable").requires("JS.Module","JS.Class"),c("deferrable").provides("JS.Deferrable").requires("JS.Module"),c("observable").provides("JS.Observable").requires("JS.Module"),c("hash").provides("JS.Hash","JS.OrderedHash").requires("JS.Class","JS.Enumerable","JS.Comparable"),c("range").provides("JS.Range").requires("JS.Class","JS.Enumerable"),c("set").provides("JS.Set","JS.HashSet","JS.OrderedSet","JS.SortedSet").requires("JS.Class","JS.Enumerable").uses("JS.Hash"),c("linked_list").provides("JS.LinkedList","JS.LinkedList.Doubly","JS.LinkedList.Doubly.Circular").requires("JS.Class","JS.Enumerable"),c("command").provides("JS.Command","JS.Command.Stack").requires("JS.Class","JS.Enumerable","JS.Observable"),c("decorator").provides("JS.Decorator").requires("JS.Module","JS.Class"),c("method_chain").provides("JS.MethodChain").requires("JS.Module","JS.Kernel"),c("proxy").provides("JS.Proxy","JS.Proxy.Virtual").requires("JS.Module","JS.Class"),c("stack_trace").provides("JS.StackTrace").requires("JS.Module","JS.Singleton","JS.Observable","JS.Enumerable","JS.Console"),c("state").provides("JS.State").requires("JS.Module","JS.Class"),c("tsort").provides("JS.TSort").requires("JS.Module").requires("JS.Class").requires("JS.Hash")}}),function(){var t="object"==typeof this.global?this.global:this;t.JS=t.JS||{},JS.ENV=t}(),JS.END_WITHOUT_DOT=/([^\.])$/,JS.array=function(t){for(var e=[],i=t.length;i--;)e[i]=t[i];return e},JS.bind=function(t,e){return function(){return t.apply(e,arguments)}},JS.extend=function(t,e,i){if(!t||!e)return t;for(var n in e)t[n]!==e[n]&&(i===!1&&t.hasOwnProperty(n)||(t[n]=e[n]));return t},JS.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=t.length;i--;)if(t[i]===e)return i;return-1},JS.isType=function(t,e){return"string"==typeof e?typeof t===e:null===t||void 0===t?!1:"function"==typeof e&&t instanceof e||t.isA&&t.isA(e)||t.constructor===e},JS.makeBridge=function(t){var e=function(){};return e.prototype=t.prototype,new e},JS.makeClass=function(t){t=t||Object;var e=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this};return e.prototype=JS.makeBridge(t),e.superclass=t,e.subclasses=[],t.subclasses&&t.subclasses.push(e),e},JS.match=function(t,e){return void 0===e?!1:"function"==typeof t.test?t.test(e):t.match(e)},JS.Method=JS.makeClass(),JS.extend(JS.Method.prototype,{initialize:function(t,e,i){if(this.module=t,this.name=e,this.callable=i,this._1={},"function"==typeof i){this.arity=i.length;for(var n=(""+i).match(/\b[a-z\_\$][a-z0-9\_\$]*\b/gi),r=n.length;r--;)this._1[n[r]]=!0}},setName:function(t){this.callable.displayName=this.displayName=t},contains:function(t){return this._1.hasOwnProperty(t)},call:function(){return this.callable.call.apply(this.callable,arguments)},apply:function(t,e){return this.callable.apply(t,e)},compile:function(t){for(var e,i=this,n=i.module.__trace__||t.__trace__,r=i.callable,s=i._1,a=JS.Method._3,o=a.length,l=[];o--;)e=a[o],s[e.name]&&l.push(e);if(0===l.length&&!n)return r;var c=function(){for(var e,n,s,a=l.length,o=a,c={};o--;)e=l[o],n=this[e.name],(!n||n.__kwd__)&&(c[e.name]={_2:n,_4:this.hasOwnProperty(e.name)},s=e.filter(i,t,this,arguments),s.__kwd__=!0,this[e.name]=s);for(var u=r.apply(this,arguments),o=a;o--;)e=l[o],c[e.name]&&(c[e.name]._4?this[e.name]=c[e.name]._2:delete this[e.name]);return u};return n?JS.StackTrace.wrap(c,i,t):c},toString:function(){var t=this.displayName||""+this.module+"#"+this.name;return"#<Method:"+t+">"}}),JS.Method.create=function(t,e,i){if(i&&i.__inc__&&i.__fns__)return i;var n="function"!=typeof i?i:new this(t,e,i);return this.notify(n),n},JS.Method.compile=function(t,e){return t&&t.compile?t.compile(e):t},JS.Method.__listeners__=[],JS.Method.added=function(t,e){this.__listeners__.push([t,e])},JS.Method.notify=function(t){for(var e,i=this.__listeners__,n=i.length;n--;)e=i[n],e[0].call(e[1],t)},JS.Method._3=[],JS.Method.keyword=function(t,e){this._3.push({name:t,filter:e})},JS.Method.tracing=function(t,e,i){JS.require("JS.StackTrace",function(){var n=JS.StackTrace.logger,r=n.active;t=[].concat(t),this.trace(t),n.active=!0,e.call(i),this.untrace(t),n.active=r},this)},JS.Method.trace=function(t){for(var e=t.length;e--;)t[e].__trace__=!0,t[e].resolve()},JS.Method.untrace=function(t){for(var e=t.length;e--;)t[e].__trace__=!1,t[e].resolve()},JS.Module=JS.makeClass(),JS.Module.__queue__=[],JS.extend(JS.Module.prototype,{initialize:function(t,e,i){"string"!=typeof t&&(i=arguments[1],e=arguments[0],t=void 0),i=i||{},this.__inc__=[],this.__dep__=[],this.__fns__={},this.__tgt__=i._5,this.__anc__=null,this.__mct__={},this.setName(t),this.include(e,{_0:!1}),JS.Module.__queue__&&JS.Module.__queue__.push(this)},setName:function(t){this.displayName=t||"";for(var e in this.__fns__)this.__name__(e);t&&this.__meta__&&this.__meta__.setName(t+".")},__name__:function(t){if(this.displayName){var e=this.__fns__[t];if(e)return t=this.displayName.replace(JS.END_WITHOUT_DOT,"$1#")+t,"function"==typeof e.setName?e.setName(t):("function"==typeof e&&(e.displayName=t),void 0)}},define:function(t,e,i){var n=JS.Method.create(this,t,e),r=(i||{})._0;this.__fns__[t]=n,this.__name__(t),r!==!1&&this.resolve()},include:function(t,e){if(!t)return this;var i,n,r,s,a,o,e=e||{},l=e._0!==!1,c=t.extend,u=t.include;if(t.__fns__&&t.__inc__)this.__inc__.push(t),(t.__dep__||{}).push&&t.__dep__.push(this),(i=e._6)?"function"==typeof t.extended&&t.extended(i):"function"==typeof t.included&&t.included(this);else{if(this.shouldIgnore("extend",c))for(s=[].concat(c),a=0,o=s.length;o>a;a++)this.extend(s[a]);if(this.shouldIgnore("include",u))for(s=[].concat(u),a=0,o=s.length;o>a;a++)this.include(s[a],{_0:!1});for(n in t)t.hasOwnProperty(n)&&(r=t[n],this.shouldIgnore(n,r)||this.define(n,r,{_0:!1}));t.hasOwnProperty("toString")&&this.define("toString",t.toString,{_0:!1})}return l&&this.resolve(),this},alias:function(t){for(var e in t)t.hasOwnProperty(e)&&this.define(e,this.instanceMethod(t[e]),{_0:!1});this.resolve()},resolve:function(t){var e,i,n,r,t=t||this,s=t.__tgt__,a=this.__inc__,o=this.__fns__;if(t===this)for(this.__anc__=null,this.__mct__={},e=this.__dep__.length;e--;)this.__dep__[e].resolve();if(s){for(e=0,i=a.length;i>e;e++)a[e].resolve(t);for(n in o)r=JS.Method.compile(o[n],t),s[n]!==r&&(s[n]=r);o.hasOwnProperty("toString")&&(s.toString=JS.Method.compile(o.toString,t))}},shouldIgnore:function(t,e){return("extend"===t||"include"===t)&&("function"!=typeof e||e.__fns__&&e.__inc__)},ancestors:function(t){var e=!t,t=t||[],i=this.__inc__;if(e&&this.__anc__)return this.__anc__.slice();for(var n=0,r=i.length;r>n;n++)i[n].ancestors(t);return 0>JS.indexOf(t,this)&&t.push(this),e&&(this.__anc__=t.slice()),t},lookup:function(t){var e=this.__mct__[t];if(e&&e.slice)return e.slice();for(var i,n=this.ancestors(),r=[],s=0,a=n.length;a>s;s++)i=n[s].__fns__,i.hasOwnProperty(t)&&r.push(i[t]);return this.__mct__[t]=r.slice(),r},includes:function(t){if(t===this)return!0;for(var e=this.__inc__,i=0,n=e.length;n>i;i++)if(e[i].includes(t))return!0;return!1},instanceMethod:function(t){return this.lookup(t).pop()},instanceMethods:function(t,e){var i,n=e||[],r=this.__fns__;for(i in r)JS.isType(this.__fns__[i],JS.Method)&&(JS.indexOf(n,i)>=0||n.push(i));if(t!==!1)for(var s=this.ancestors(),a=s.length;a--;)s[a].instanceMethods(!1,n);return n},match:function(t){return t&&t.isA&&t.isA(this)},toString:function(){return this.displayName}}),JS.Kernel=new JS.Module("Kernel",{__eigen__:function(){if(this.__meta__)return this.__meta__;var t=""+this+".";return this.__meta__=new JS.Module(t,null,{_5:this}),this.__meta__.include(this.klass,{_0:!1})},equals:function(t){return this===t},extend:function(t,e){var i=(e||{})._0;return this.__eigen__().include(t,{_6:this,_0:i}),this},hash:function(){return JS.Kernel.hashFor(this)},isA:function(t){return"function"==typeof t&&this instanceof t||this.__eigen__().includes(t)},method:function(t){var e=this.__mct__=this.__mct__||{},i=e[t],n=this[t];if("function"!=typeof n)return n;if(i&&n===i._2)return i._7;var r=JS.bind(n,this);return e[t]={_2:n,_7:r},r},methods:function(){return this.__eigen__().instanceMethods()},tap:function(t,e){return t.call(e||null,this),this},toString:function(){if(this.displayName)return this.displayName;var t=this.klass.displayName||""+this.klass;return"#<"+t+":"+this.hash()+">"}}),function(){var t=1;JS.Kernel.hashFor=function(e){return void 0!==e.__hash__?e.__hash__:(e.__hash__=((new Date).getTime()+t).toString(16),t+=1,e.__hash__)}}(),JS.Class=JS.makeClass(JS.Module),JS.extend(JS.Class.prototype,{initialize:function(t,e,i,n){"string"!=typeof t&&(n=arguments[2],i=arguments[1],e=arguments[0],t=void 0),"function"!=typeof e&&(n=i,i=e,e=Object),JS.Module.prototype.initialize.call(this,t),n=n||{};var r=JS.makeClass(e);JS.extend(r,this),r.prototype.constructor=r.prototype.klass=r,r.__eigen__().include(e.__meta__,{_0:n._0}),r.setName(t),r.__tgt__=r.prototype;var s=e===Object?{}:e.__fns__?e:new JS.Module(e.prototype,{_0:!1});return r.include(JS.Kernel,{_0:!1}).include(s,{_0:!1}).include(i,{_0:!1}),n._0!==!1&&r.resolve(),"function"==typeof e.inherited&&e.inherited(r),r}}),function(){var t=function(t){var e={},i=t.prototype;for(var n in i)i.hasOwnProperty(n)&&(e[n]=JS.Method.create(t,n,i[n]));return e},e=function(e,i){var n=JS[e],r=JS[i];n.__inc__=[],n.__dep__=[],n.__fns__=t(n),n.__tgt__=n.prototype,n.prototype.constructor=n.prototype.klass=n,JS.extend(n,JS.Class.prototype),n.include(r||JS.Kernel),n.setName(e),n.constructor=n.klass=JS.Class};e("Method"),e("Module"),e("Class","Module");var i=JS.Kernel.instanceMethod("__eigen__");i.call(JS.Method).resolve(),i.call(JS.Module).resolve(),i.call(JS.Class).include(JS.Module.__meta__)}(),JS.NotImplementedError=new JS.Class("NotImplementedError",Error),JS.Method.keyword("callSuper",function(t,e,i,n){var r=e.lookup(t.name),s=r.length-1,a=JS.array(n);return function(){for(var t=arguments.length;t--;)a[t]=arguments[t];s-=1;var e=r[s].apply(i,a);return s+=1,e}}),JS.Method.keyword("blockGiven",function(t,e,i,n){var r=Array.prototype.slice.call(n,t.arity),s="function"==typeof r[0];return function(){return s}}),JS.Method.keyword("yieldWith",function(t,e,i,n){var r=Array.prototype.slice.call(n,t.arity);return function(){return"function"==typeof r[0]?r[0].apply(r[1]||null,arguments):void 0}}),JS.Interface=new JS.Class("Interface",{initialize:function(t){this.test=function(e,i){for(var n=t.length;n--;)if("function"!=typeof e[t[n]])return i?t[n]:!1;return!0}},extend:{ensure:function(){for(var t,e,i=JS.array(arguments),n=i.shift();t=i.shift();)if(e=t.test(n,!0),e!==!0)throw Error("object does not implement "+e+"()")}}}),JS.Singleton=new JS.Class("Singleton",{initialize:function(t,e,i){return new new JS.Class(t,e,i)}}),JS.Observable=new JS.Module("Observable",{extend:{DEFAULT_METHOD:"update"},addObserver:function(t,e){(this.__observers__=this.__observers__||[]).push({_0:t,_1:e||null})},removeObserver:function(t,e){this.__observers__=this.__observers__||[],e=e||null;for(var i=this.countObservers();i--;)if(this.__observers__[i]._0===t&&this.__observers__[i]._1===e)return this.__observers__.splice(i,1),void 0},removeObservers:function(){this.__observers__=[]},countObservers:function(){return(this.__observers__=this.__observers__||[]).length},notifyObservers:function(){if(this.isChanged())for(var t,e,i,n=this.countObservers();n--;)t=this.__observers__[n],e=t._0,i=t._1,"function"==typeof e?e.apply(i||null,arguments):e[i||JS.Observable.DEFAULT_METHOD].apply(e,arguments)},setChanged:function(t){this.__changed__=!(t===!1)},isChanged:function(){return void 0===this.__changed__&&(this.__changed__=!0),!!this.__changed__}}),JS.Observable.alias({subscribe:"addObserver",unsubscribe:"removeObserver"},!0),JS.require("JS.Observable",function(){LocalBroadcaster=new JS.Class({include:JS.Observable,initialize:function(){}}),Fragment=new JS.Class({initialize:function(t,e){this.open=!0,this.data={},this.domEvents=[],this.messageBindEvents=[],this.localBroadcaster=t,this.remoteBroadcaster=e},set:function(t,e){this.data[t]=e},get:function(t){return this.data[t]},setup:function(){this.open&&(this.setupMessageEvents(),this.setupVisual())},visualComplete:function(){this.setupDOMEvents(),this.setupComplete()},setupVisual:function(){},setupDOMEvents:function(){},setupMessageEvents:function(){},setupComplete:function(){},bindToTemplate:function(t,e,i){void 0===e[t]?$.get(t,function(n){e[t]=Handlebars.compile(n),i(e[t])}):i(e[t])},bindToTemplates:function(t,e,i){for(var n=0,r=[],s=function(){n++,n==t.length&&i(r)},a=function(t,i){void 0===e[t]?$.get(t,function(n){e[t]=Handlebars.compile(n),r[i]=e[t],s()}):(r[i]=e[t],s())},o=0;t.length>o;o++)a(t[o],o)},cleanUp:function(){},sendLocalMessage:function(t,e){this.open&&this.localBroadcaster.notifyObservers({messageKey:t,data:e,isLocal:!0})},sendRemoteMessage:function(t,e){this.open&&this.remoteBroadcaster(t,e)},sendLocalAndRemoteMessage:function(t,e){this.sendLocalMessage(t,e),this.sendRemoteMessage(t,e)},bindDOMEvent:function(t,e,i){this.open&&(this.domEvents.push({selector:t,eventType:e}),$("body").delegate(t,e,i))},bindMessageEvent:function(t,e){if(this.open){var i="anonymous_f_"+this.messageBindEvents.length;this.messageBindEvents.push(i),this.__proto__[i]=function(i){i.messageKey==t&&e(i.data,i.isLocal)},this.localBroadcaster.addObserver(this.method(i))}},close:function(){this.close=!1;for(var t=0;this.domEvents.length>t;t++)$("body").undelegate(this.domEvents[t].selector,this.domEvents[t].eventType);for(var t=0;this.messageBindEvents.length>t;t++)this.localBroadcaster.removeObserver(this.method(this.messageBindEvents[t]));this.cleanUp()}}),Utility=new JS.Class({initialize:function(){},randomString:function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;t>n;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}})}),Array.prototype.select=function(t){for(var e=[],i=0;this.length>i;i++)t(this[i])&&e.push(this[i]);return e},Array.prototype.map=function(t){for(var e=[],i=0;this.length>i;i++)e.push(t(this[i]));return e},Array.prototype.remove=function(t){this.select(function(e){return!t(e)})},Array.prototype.indexOfSelect=function(t){for(var e=0;this.length>e;e++)if(t(this[e]))return e;return-1},function(){var t=this,e=t._,i={},n=Array.prototype,r=Object.prototype,s=Function.prototype,a=n.push,o=n.slice,l=n.concat,c=r.toString,u=r.hasOwnProperty,h=n.forEach,p=n.map,d=n.reduce,f=n.reduceRight,m=n.filter,v=n.every,g=n.some,_=n.indexOf,y=n.lastIndexOf,S=Array.isArray,b=Object.keys,k=s.bind,x=function(t){return t instanceof x?t:this instanceof x?(this._wrapped=t,void 0):new x(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):t._=x,x.VERSION="1.4.4";var w=x.each=x.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var a in t)if(x.has(t,a)&&e.call(n,t[a],a,t)===i)return};x.map=x.collect=function(t,e,i){var n=[];return null==t?n:p&&t.map===p?t.map(e,i):(w(t,function(t,r,s){n[n.length]=e.call(i,t,r,s)}),n)};var E="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return n&&(e=x.bind(e,n)),r?t.reduce(e,i):t.reduce(e);if(w(t,function(t,s,a){r?i=e.call(n,i,t,s,a):(i=t,r=!0)}),!r)throw new TypeError(E);return i},x.reduceRight=x.foldr=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=x.bind(e,n)),r?t.reduceRight(e,i):t.reduceRight(e);var s=t.length;if(s!==+s){var a=x.keys(t);s=a.length}if(w(t,function(o,l,c){l=a?a[--s]:--s,r?i=e.call(n,i,t[l],l,c):(i=t[l],r=!0)}),!r)throw new TypeError(E);return i},x.find=x.detect=function(t,e,i){var n;return J(t,function(t,r,s){return e.call(i,t,r,s)?(n=t,!0):void 0}),n},x.filter=x.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(w(t,function(t,r,s){e.call(i,t,r,s)&&(n[n.length]=t)}),n)},x.reject=function(t,e,i){return x.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)},x.every=x.all=function(t,e,n){e||(e=x.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,n):(w(t,function(t,s,a){return(r=r&&e.call(n,t,s,a))?void 0:i}),!!r)};var J=x.some=x.any=function(t,e,n){e||(e=x.identity);var r=!1;return null==t?r:g&&t.some===g?t.some(e,n):(w(t,function(t,s,a){return r||(r=e.call(n,t,s,a))?i:void 0}),!!r)};x.contains=x.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):J(t,function(t){return t===e})},x.invoke=function(t,e){var i=o.call(arguments,2),n=x.isFunction(e);return x.map(t,function(t){return(n?e:t[e]).apply(t,i)})},x.pluck=function(t,e){return x.map(t,function(t){return t[e]})},x.where=function(t,e,i){return x.isEmpty(e)?i?null:[]:x[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},x.findWhere=function(t,e){return x.where(t,e,!0)},x.max=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&x.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return w(t,function(t,r,s){var a=e?e.call(i,t,r,s):t;a>=n.computed&&(n={value:t,computed:a})}),n.value},x.min=function(t,e,i){if(!e&&x.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&x.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return w(t,function(t,r,s){var a=e?e.call(i,t,r,s):t;n.computed>a&&(n={value:t,computed:a})}),n.value},x.shuffle=function(t){var e,i=0,n=[];return w(t,function(t){e=x.random(i++),n[i-1]=n[e],n[e]=t}),n};var T=function(t){return x.isFunction(t)?t:function(e){return e[t]}};x.sortBy=function(t,e,i){var n=T(e);return x.pluck(x.map(t,function(t,e,r){return{value:t,index:e,criteria:n.call(i,t,e,r)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var M=function(t,e,i,n){var r={},s=T(e||x.identity);return w(t,function(e,a){var o=s.call(i,e,a,t);n(r,o,e)}),r};x.groupBy=function(t,e,i){return M(t,e,i,function(t,e,i){(x.has(t,e)?t[e]:t[e]=[]).push(i)})},x.countBy=function(t,e,i){return M(t,e,i,function(t,e){x.has(t,e)||(t[e]=0),t[e]++})},x.sortedIndex=function(t,e,i,n){i=null==i?x.identity:T(i);for(var r=i.call(n,e),s=0,a=t.length;a>s;){var o=s+a>>>1;r>i.call(n,t[o])?s=o+1:a=o}return s},x.toArray=function(t){return t?x.isArray(t)?o.call(t):t.length===+t.length?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:t.length===+t.length?t.length:x.keys(t).length},x.first=x.head=x.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:o.call(t,0,e)},x.initial=function(t,e,i){return o.call(t,0,t.length-(null==e||i?1:e))},x.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},x.rest=x.tail=x.drop=function(t,e,i){return o.call(t,null==e||i?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var C=function(t,e,i){return w(t,function(t){x.isArray(t)?e?a.apply(i,t):C(t,e,i):i.push(t)}),i};x.flatten=function(t,e){return C(t,e,[])},x.without=function(t){return x.difference(t,o.call(arguments,1))},x.uniq=x.unique=function(t,e,i,n){x.isFunction(e)&&(n=i,i=e,e=!1);var r=i?x.map(t,i,n):t,s=[],a=[];return w(r,function(i,n){(e?n&&a[a.length-1]===i:x.contains(a,i))||(a.push(i),s.push(t[n]))}),s},x.union=function(){return x.uniq(l.apply(n,arguments))},x.intersection=function(t){var e=o.call(arguments,1);return x.filter(x.uniq(t),function(t){return x.every(e,function(e){return x.indexOf(e,t)>=0})})},x.difference=function(t){var e=l.apply(n,o.call(arguments,1));return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){for(var t=o.call(arguments),e=x.max(x.pluck(t,"length")),i=Array(e),n=0;e>n;n++)i[n]=x.pluck(t,""+n);return i},x.object=function(t,e){if(null==t)return{};for(var i={},n=0,r=t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},x.indexOf=function(t,e,i){if(null==t)return-1;var n=0,r=t.length;if(i){if("number"!=typeof i)return n=x.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,r+i):i}if(_&&t.indexOf===_)return t.indexOf(e,i);for(;r>n;n++)if(t[n]===e)return n;return-1},x.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var r=n?i:t.length;r--;)if(t[r]===e)return r;return-1},x.range=function(t,e,i){1>=arguments.length&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=0,s=Array(n);n>r;)s[r++]=t,t+=i;return s},x.bind=function(t,e){if(t.bind===k&&k)return k.apply(t,o.call(arguments,1));var i=o.call(arguments,2);return function(){return t.apply(e,i.concat(o.call(arguments)))}},x.partial=function(t){var e=o.call(arguments,1);return function(){return t.apply(this,e.concat(o.call(arguments)))}},x.bindAll=function(t){var e=o.call(arguments,1);return 0===e.length&&(e=x.functions(t)),w(e,function(e){t[e]=x.bind(t[e],t)}),t},x.memoize=function(t,e){var i={};return e||(e=x.identity),function(){var n=e.apply(this,arguments);return x.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},x.delay=function(t,e){var i=o.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},x.defer=function(t){return x.delay.apply(x,[t,1].concat(o.call(arguments,1)))},x.throttle=function(t,e){var i,n,r,s,a=0,o=function(){a=new Date,r=null,s=t.apply(i,n)};return function(){var l=new Date,c=e-(l-a);return i=this,n=arguments,0>=c?(clearTimeout(r),r=null,a=l,s=t.apply(i,n)):r||(r=setTimeout(o,c)),s}},x.debounce=function(t,e,i){var n,r;return function(){var s=this,a=arguments,o=function(){n=null,i||(r=t.apply(s,a))},l=i&&!n;return clearTimeout(n),n=setTimeout(o,e),l&&(r=t.apply(s,a)),r}},x.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},x.wrap=function(t,e){return function(){var i=[t];return a.apply(i,arguments),e.apply(this,i)}},x.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},x.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},x.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)x.has(t,i)&&(e[e.length]=i);return e},x.values=function(t){var e=[];for(var i in t)x.has(t,i)&&e.push(t[i]);return e},x.pairs=function(t){var e=[];for(var i in t)x.has(t,i)&&e.push([i,t[i]]);return e},x.invert=function(t){var e={};for(var i in t)x.has(t,i)&&(e[t[i]]=i);return e},x.functions=x.methods=function(t){var e=[];for(var i in t)x.isFunction(t[i])&&e.push(i);return e.sort()},x.extend=function(t){return w(o.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},x.pick=function(t){var e={},i=l.apply(n,o.call(arguments,1));return w(i,function(i){i in t&&(e[i]=t[i])}),e},x.omit=function(t){var e={},i=l.apply(n,o.call(arguments,1));for(var r in t)x.contains(i,r)||(e[r]=t[r]);return e},x.defaults=function(t){return w(o.call(arguments,1),function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t};var N=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;i.push(t),n.push(e);var a=0,o=!0;if("[object Array]"==r){if(a=t.length,o=a==e.length)for(;a--&&(o=N(t[a],e[a],i,n)););}else{var l=t.constructor,u=e.constructor;if(l!==u&&!(x.isFunction(l)&&l instanceof l&&x.isFunction(u)&&u instanceof u))return!1;
for(var h in t)if(x.has(t,h)&&(a++,!(o=x.has(e,h)&&N(t[h],e[h],i,n))))break;if(o){for(h in e)if(x.has(e,h)&&!a--)break;o=!a}}return i.pop(),n.pop(),o};x.isEqual=function(t,e){return N(t,e,[],[])},x.isEmpty=function(t){if(null==t)return!0;if(x.isArray(t)||x.isString(t))return 0===t.length;for(var e in t)if(x.has(t,e))return!1;return!0},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=S||function(t){return"[object Array]"==c.call(t)},x.isObject=function(t){return t===Object(t)},w(["Arguments","Function","String","Number","Date","RegExp"],function(t){x["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return!(!t||!x.has(t,"callee"))}),true&&(x.isFunction=function(t){return"function"==typeof t}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!=+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return u.call(t,e)},x.noConflict=function(){return t._=e,this},x.identity=function(t){return t},x.times=function(t,e,i){for(var n=Array(t),r=0;t>r;r++)n[r]=e.call(i,r);return n},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=x.invert(P.escape);var H={escape:RegExp("["+x.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(P.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(t){x[t]=function(e){return null==e?"":(""+e).replace(H[t],function(e){return P[t][e]})}}),x.result=function(t,e){if(null==t)return null;var i=t[e];return x.isFunction(i)?i.call(t):i},x.mixin=function(t){w(x.functions(t),function(e){var i=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),L.call(this,i.apply(x,t))}})};var O=0;x.uniqueId=function(t){var e=++O+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(t,e,i){var n;i=x.defaults({},i,x.templateSettings);var r=RegExp([(i.escape||A).source,(i.interpolate||A).source,(i.evaluate||A).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(r,function(e,i,n,r,o){return a+=t.slice(s,o).replace($,function(t){return"\\"+I[t]}),i&&(a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+e.length,e}),a+="';\n",i.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=Function(i.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return n(e,x);var l=function(t){return n.call(this,t,x)};return l.source="function("+(i.variable||"obj")+"){\n"+a+"}",l},x.chain=function(t){return x(t).chain()};var L=function(t){return this._chain?x(t).chain():t};x.mixin(x),w(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];x.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],L.call(this,i)}}),w(["concat","join","slice"],function(t){var e=n[t];x.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var t,e=this,i=e.Backbone,n=[],r=n.push,s=n.slice,a=n.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="0.9.10";var o=e._;!o&&"undefined"!=typeof require&&(o=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i)for(var r in i)t[e].apply(t,[r,i[r]].concat(n));else{if(!l.test(i))return!0;i=i.split(l),r=0;for(var s=i.length;s>r;r++)t[e].apply(t,[i[r]].concat(n))}},u=function(t,e){var i,n=-1,r=t.length;switch(e.length){case 0:for(;r>++n;)(i=t[n]).callback.call(i.ctx);break;case 1:for(;r>++n;)(i=t[n]).callback.call(i.ctx,e[0]);break;case 2:for(;r>++n;)(i=t[n]).callback.call(i.ctx,e[0],e[1]);break;case 3:for(;r>++n;)(i=t[n]).callback.call(i.ctx,e[0],e[1],e[2]);break;default:for(;r>++n;)(i=t[n]).callback.apply(i.ctx,e)}},n=t.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var n=this,r=o.once(function(){n.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i),this},off:function(t,e,i){var n,r,s,a,l,u,h,p;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:o.keys(this._events),l=0,u=a.length;u>l;l++)if(t=a[l],n=this._events[t]){if(s=[],e||i)for(h=0,p=n.length;p>h;h++)r=n[h],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&s.push(r);this._events[t]=s}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},listenTo:function(t,e,i){var n=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=o.uniqueId("l"));return n[r]=t,t.on(e,"object"==typeof e?this:i,this),this},stopListening:function(t,e,i){var n=this._listeners;if(n){if(t)t.off(e,"object"==typeof e?this:i,this),!e&&!i&&delete n[t._listenerId];else{"object"==typeof e&&(i=this);for(var r in n)n[r].off(e,i,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,o.extend(t,n);var h=t.Model=function(t,e){var i,n=t||{};this.cid=o.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(i=o.result(this,"defaults"))&&(n=o.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};o.extend(h.prototype,n,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,r,s,a,l,c,u;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;s=i.unset,a=i.silent,t=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=o.clone(this.attributes),this.changed={}),u=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)e=r[n],o.isEqual(u[n],e)||t.push(n),o.isEqual(c[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete u[n]:u[n]=e;if(!a)for(t.length&&(this._pending=!0),e=0,n=t.length;n>e;e++)this.trigger("change:"+t[e],this,u[t[e]],i);if(l)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._changing=this._pending=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e,i={};for(e in this.attributes)i[e]=void 0;return this.set(i,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?o.clone(this.changed):!1;var e,i,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(i in t)o.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,i,n){return t.set(t.parse(i,n),n)?(e&&e(t,i,n),void 0):!1},this.sync("read",this,t)},save:function(t,e,i){var n,r,s=this.attributes;return null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,!n||i&&i.wait||this.set(n,i)?(i=o.extend({validate:!0},i),this._validate(n,i)?(n&&i.wait&&(this.attributes=o.extend({},s,n)),void 0===i.parse&&(i.parse=!0),r=i.success,i.success=function(t,e,i){t.attributes=s;var a=t.parse(e,i);return i.wait&&(a=o.extend(n||{},a)),o.isObject(a)&&!t.set(a,i)?!1:(r&&r(t,e,i),void 0)},t=this.isNew()?"create":i.patch?"patch":"update","patch"===t&&(i.attrs=n),t=this.sync(t,this,i),n&&i.wait&&(this.attributes=s),t):!1):!1},destroy:function(t){t=t?o.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(t,e,r){(r.wait||t.isNew())&&n(),i&&i(t,e,r)},this.isNew())return t.success(this,null,t),!1;var r=this.sync("delete",this,t);return t.wait||n(),r},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||T();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return!this.validate||!this.validate(this.attributes,t)},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,e||{}),!1):!0}});var p=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))};o.extend(p.prototype,n,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){t=o.isArray(t)?t.slice():[t],e||(e={});var i,n,s,l,c,u,h,p,d,f;for(h=[],p=e.at,d=this.comparator&&null==p&&!1!=e.sort,f=o.isString(this.comparator)?this.comparator:null,i=0,n=t.length;n>i;i++)(s=this._prepareModel(l=t[i],e))?(c=this.get(s))?e.merge&&(c.set(l===s?s.attributes:l,e),d&&!u&&c.hasChanged(f)&&(u=!0)):(h.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)):this.trigger("invalid",this,l,e);if(h.length&&(d&&(u=!0),this.length+=h.length,null!=p?a.apply(this.models,[p,0].concat(h)):r.apply(this.models,h)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,n=h.length;n>i;i++)(s=h[i]).trigger("add",s,this,e);return u&&this.trigger("sort",this,e),this},remove:function(t,e){t=o.isArray(t)?t.slice():[t],e||(e={});var i,n,r,s;for(i=0,n=t.length;n>i;i++)(s=this.get(t[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null!=t?(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[t.id||t.cid||t[this._idAttr]||t]):void 0},at:function(t){return this.models[t]},where:function(t){return o.isEmpty(t)?[]:this.filter(function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return o.invoke(this.models,"get",t)},update:function(t,e){e=o.extend({add:!0,merge:!0,remove:!0},e),e.parse&&(t=this.parse(t,e));var i,n,r,s,a=[],l=[],c={};if(o.isArray(t)||(t=t?[t]:[]),e.add&&!e.remove)return this.add(t,e);for(n=0,r=t.length;r>n;n++)i=t[n],s=this.get(i),e.remove&&s&&(c[s.cid]=!0),(e.add&&!s||e.merge&&s)&&a.push(i);if(e.remove)for(n=0,r=this.models.length;r>n;n++)i=this.models[n],c[i.cid]||l.push(i);return l.length&&this.remove(l,e),a.length&&this.add(a,e),this},reset:function(t,e){e||(e={}),e.parse&&(t=this.parse(t,e));for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models.slice(),this._reset(),t&&this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,i,n){t[n.update?"update":"reset"](i,n),e&&e(t,i,n)},this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(t,e,r){r.wait&&i.add(t,r),n&&n(t,e,r)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:!1},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"===t||"remove"===t)&&i!==this||("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=o.isFunction(e)?e:function(t){return t.get(e)};return o.sortedIndex(this.models,t,n,i)}}),o.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(t){p.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),o[t].apply(o,e)}}),o.each(["groupBy","countBy","sortBy"],function(t){p.prototype[t]=function(e,i){var n=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,n,i)}});var d=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},f=/\((.*?)\)/g,m=/(\(\?)?:\w+/g,v=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(d.prototype,n,{initialize:function(){},route:function(e,i,n){return o.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[i]),t.history.route(e,o.bind(function(r){r=this._extractParameters(e,r),n&&n.apply(this,r),this.trigger.apply(this,["route:"+i].concat(r)),this.trigger("route",i,r),t.history.trigger("route",this,i,r)},this)),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes)for(var t,e=o.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])},_routeToRegExp:function(t){return t=t.replace(g,"\\$&").replace(f,"(?:$1)?").replace(m,function(t,e){return e?t:"([^/]+)"}).replace(v,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var _=t.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},y=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,b=/msie [\w.]+/,k=/\/$/;_.started=!1,o.extend(_.prototype,n,{interval:50,getHash:function(t){return(t=(t||this).location.href.match(/#(.*)$/))?t[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(k,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(y,"")},start:function(e){if(_.started)throw Error("Backbone.history has already been started");_.started=!0,this.options=o.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState),e=this.getFragment();var i=document.documentMode,i=b.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);return this.root=("/"+this.root+"/").replace(S,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e,e=this.location,i=e.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!i?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&i&&e.hash&&(this.fragment=this.getHash().replace(y,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),_.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t);return o.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(t,e){if(!_.started)return!1;if(e&&!0!==e||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){i?(i=t.href.replace(/(javascript:|#).*$/,""),t.replace(i+"#"+e)):t.hash="#"+e}}),t.history=new _;var x=t.View=function(t){this.cid=o.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E="model collection el id attributes className tagName events".split(" ");o.extend(x.prototype,n,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=o.result(this,"events"))){this.undelegateEvents();for(var e in t){var i=t[e];if(o.isFunction(i)||(i=this[t[e]]),!i)throw Error('Method "'+t[e]+'" does not exist');var n=e.match(w),r=n[1],n=n[2],i=o.bind(i,this),r=r+(".delegateEvents"+this.cid);""===n?this.$el.on(r,i):this.$el.on(r,n,i)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=o.extend({},o.result(this,"options"),t)),o.extend(this,o.pick(t,E)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e["class"]=o.result(this,"className")),e=t.$("<"+o.result(this,"tagName")+">").attr(e),this.setElement(e,!1)}}});var J={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.sync=function(e,i,n){var r=J[e];o.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(n.url||(s.url=o.result(i,"url")||T()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",n.emulateJSON&&(s.data._method=r);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"!==s.type&&!n.emulateJSON&&(s.processData=!1);var l=n.success;n.success=function(t){l&&l(i,t,n),i.trigger("sync",i,t,n)};var c=n.error;return n.error=function(t){c&&c(i,t,n),i.trigger("error",i,t,n)},e=n.xhr=t.ajax(o.extend(s,n)),i.trigger("request",i,e,n),e},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)},h.extend=p.extend=d.extend=x.extend=_.extend=function(t,e){var i,n=this;i=t&&o.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},o.extend(i,n,e);var r=function(){this.constructor=i};return r.prototype=n.prototype,i.prototype=new r,t&&o.extend(i.prototype,t),i.__super__=n.prototype,i};var T=function(){throw Error('A "url" property or function must be specified')}}.call(this),this.Handlebars={},function(t){t.VERSION="1.0.0-rc.3",t.COMPILER_REVISION=2,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},t.helpers={},t.partials={},t.registerHelper=function(t,e,i){i&&(e.not=i),this.helpers[t]=e},t.registerPartial=function(t,e){this.partials[t]=e},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Could not find property '"+t+"'")});var e=Object.prototype.toString,i="[object Function]";t.registerHelper("blockHelperMissing",function(n,r){var s=r.inverse||function(){},a=r.fn,o=e.call(n);return o===i&&(n=n.call(this)),n===!0?a(this):n===!1||null==n?s(this):"[object Array]"===o?n.length>0?t.helpers.each(n,r):s(this):a(n)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var i=new t.K;return t.K.prototype=null,i},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,i){if(e>=t.logger.level){var n=t.logger.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,i)}}},t.log=function(e,i){t.logger.log(e,i)},t.registerHelper("each",function(e,i){var n,r=i.fn,s=i.inverse,a=0,o="";if(i.data&&(n=t.createFrame(i.data)),e&&"object"==typeof e)if(e instanceof Array)for(var l=e.length;l>a;a++)n&&(n.index=a),o+=r(e[a],{data:n});else for(var c in e)e.hasOwnProperty(c)&&(n&&(n.key=c),o+=r(e[c],{data:n}),a++);return 0===a&&(o=s(this)),o}),t.registerHelper("if",function(n,r){var s=e.call(n);return s===i&&(n=n.call(this)),!n||t.Utils.isEmpty(n)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,i){var n=i.fn,r=i.inverse;return i.fn=r,i.inverse=n,t.helpers["if"].call(this,e,i)}),t.registerHelper("with",function(t,e){return e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}(this.Handlebars);var handlebars=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,e,i,n,r,s){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=new n.ProgramNode([],s[a]);break;case 3:this.$=new n.ProgramNode(s[a-2],s[a]);break;case 4:this.$=new n.ProgramNode(s[a-1],[]);break;case 5:this.$=new n.ProgramNode(s[a]);break;case 6:this.$=new n.ProgramNode([],[]);break;case 7:this.$=new n.ProgramNode([]);break;case 8:this.$=[s[a]];break;case 9:s[a-1].push(s[a]),this.$=s[a-1];break;case 10:this.$=new n.BlockNode(s[a-2],s[a-1].inverse,s[a-1],s[a]);break;case 11:this.$=new n.BlockNode(s[a-2],s[a-1],s[a-1].inverse,s[a]);break;case 12:this.$=s[a];break;case 13:this.$=s[a];break;case 14:this.$=new n.ContentNode(s[a]);break;case 15:this.$=new n.CommentNode(s[a]);break;case 16:this.$=new n.MustacheNode(s[a-1][0],s[a-1][1]);break;case 17:this.$=new n.MustacheNode(s[a-1][0],s[a-1][1]);break;case 18:this.$=s[a-1];break;case 19:this.$=new n.MustacheNode(s[a-1][0],s[a-1][1]);break;case 20:this.$=new n.MustacheNode(s[a-1][0],s[a-1][1],!0);break;case 21:this.$=new n.PartialNode(s[a-1]);break;case 22:this.$=new n.PartialNode(s[a-2],s[a-1]);break;case 23:break;case 24:this.$=[[s[a-2]].concat(s[a-1]),s[a]];break;case 25:this.$=[[s[a-1]].concat(s[a]),null];break;case 26:this.$=[[s[a-1]],s[a]];break;case 27:this.$=[[s[a]],null];break;case 28:this.$=[[new n.DataNode(s[a])],null];break;case 29:s[a-1].push(s[a]),this.$=s[a-1];break;case 30:this.$=[s[a]];break;case 31:this.$=s[a];break;case 32:this.$=new n.StringNode(s[a]);break;case 33:this.$=new n.IntegerNode(s[a]);break;case 34:this.$=new n.BooleanNode(s[a]);break;case 35:this.$=new n.DataNode(s[a]);break;case 36:this.$=new n.HashNode(s[a]);break;case 37:s[a-1].push(s[a]),this.$=s[a-1];break;case 38:this.$=[s[a]];break;case 39:this.$=[s[a-2],s[a]];break;case 40:this.$=[s[a-2],new n.StringNode(s[a])];break;case 41:this.$=[s[a-2],new n.IntegerNode(s[a])];break;case 42:this.$=[s[a-2],new n.BooleanNode(s[a])];break;case 43:this.$=[s[a-2],new n.DataNode(s[a])];break;case 44:this.$=new n.PartialNameNode(s[a]);break;case 45:this.$=new n.IdNode(s[a]);break;case 46:s[a-2].push(s[a]),this.$=s[a-2];break;case 47:this.$=[s[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t){throw Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],r=[null],s=[],a=this.table,o="",l=0,c=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,v,g,_,y,S,b,k={};;){if(m=n[n.length-1],this.defaultActions[m]?v=this.defaultActions[m]:((null===d||d===void 0)&&(d=e()),v=a[m]&&a[m][d]),v===void 0||!v.length||!v[0]){var x="";if(!u){b=[];for(_ in a[m])this.terminals_[_]&&_>2&&b.push("'"+this.terminals_[_]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:b})
}}if(v[0]instanceof Array&&v.length>1)throw Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(v[0]){case 1:n.push(d),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(v[1]),d=null,f?(d=f,f=null):(c=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[v[1]][1],k.$=r[r.length-y],k._$={first_line:s[s.length-(y||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(y||1)].first_column,last_column:s[s.length-1].last_column},p&&(k._$.range=[s[s.length-(y||1)].range[0],s[s.length-1].range[1]]),g=this.performAction.call(k,o,c,l,this.yy,v[1],r,s),g!==void 0)return g;y&&(n=n.slice(0,2*-1*y),r=r.slice(0,-1*y),s=s.slice(0,-1*y)),n.push(this.productions_[v[1]][0]),r.push(k.$),s.push(k._$),S=a[n[n.length-2]][n[n.length-1]],n.push(S);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;s.length>a&&(i=this._input.match(this.rules[s[a]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){switch(i){case 0:if("\\"!==e.yytext.slice(-1)&&this.begin("mu"),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1),this.begin("emu")),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&(e.yytext=e.yytext.substr(0,e.yyleng-1)),14;case 3:return e.yytext=e.yytext.substr(0,e.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return e.yytext=e.yytext.substr(3,e.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\"/g,'"'),30;case 22:return e.yytext=e.yytext.substr(1,e.yyleng-2).replace(/\\'/g,"'"),30;case 23:return e.yytext=e.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return e.yytext=e.yytext.substr(1,e.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();Handlebars.Parser=handlebars,Handlebars.parse=function(t){return t.constructor===Handlebars.AST.ProgramNode?t:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(t))},Handlebars.print=function(t){return(new Handlebars.PrintVisitor).accept(t)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(t,e){this.type="program",this.statements=t,e&&(this.inverse=new Handlebars.AST.ProgramNode(e))},Handlebars.AST.MustacheNode=function(t,e,i){this.type="mustache",this.escaped=!i,this.hash=e;var n=this.id=t[0],r=this.params=t.slice(1),s=this.eligibleHelper=n.isSimple;this.isHelper=s&&(r.length||e)},Handlebars.AST.PartialNode=function(t,e){this.type="partial",this.partialName=t,this.context=e};var t=function(t,e){if(t.original!==e.original)throw new Handlebars.Exception(t.original+" doesn't match "+e.original)};Handlebars.AST.BlockNode=function(e,i,n,r){t(e.id,r),this.type="block",this.mustache=e,this.program=i,this.inverse=n,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(t){this.type="content",this.string=t},Handlebars.AST.HashNode=function(t){this.type="hash",this.pairs=t},Handlebars.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");for(var e=[],i=0,n=0,r=t.length;r>n;n++){var s=t[n];if(".."===s||"."===s||"this"===s){if(e.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);".."===s?i++:this.isScoped=!0}else e.push(s)}this.parts=e,this.string=e.join("."),this.depth=i,this.isSimple=1===t.length&&!this.isScoped&&0===i,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(t){this.type="PARTIAL_NAME",this.name=t},Handlebars.AST.DataNode=function(t){this.type="DATA",this.id=t},Handlebars.AST.StringNode=function(t){this.type="STRING",this.string=t,this.stringModeValue=t},Handlebars.AST.IntegerNode=function(t){this.type="INTEGER",this.integer=t,this.stringModeValue=Number(t)},Handlebars.AST.BooleanNode=function(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},Handlebars.AST.CommentNode=function(t){this.type="comment",this.comment=t}}();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;errorProps.length>e;e++)this[errorProps[e]]=t[errorProps[e]]},Handlebars.Exception.prototype=Error(),Handlebars.SafeString=function(t){this.string=t},Handlebars.SafeString.prototype.toString=function(){return""+this.string},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=/[&<>"'`]/g,i=/[&<>"'`]/,n=function(e){return t[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(t){return t instanceof Handlebars.SafeString?""+t:null==t||t===!1?"":i.test(t)?t.replace(e,n):t},isEmpty:function(t){return t||0===t?"[object Array]"===Object.prototype.toString.call(t)&&0===t.length?!0:!1:!0}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(t,e){t.prototype={compiler:t,disassemble:function(){for(var t,e,i,n=this.opcodes,r=[],s=0,a=n.length;a>s;s++)if(t=n[s],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var o=0;t.args.length>o;o++)i=t.args[o],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],r=t.opcodes[i];if(n.opcode!==r.opcode||n.args.length!==r.args.length)return!1;for(var s=0;n.args.length>s;s++)if(n.args[s]!==r.args[s])return!1}return!0},guid:0,compile:function(t,e){this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];return this.program(t)},accept:function(t){return this[t.type](t)},program:function(t){var e,i=t.statements;this.opcodes=[];for(var n=0,r=i.length;r>n;n++)e=i[n],this[e.type](e);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var r=0,s=i.depths.list.length;s>r;r++)e=i.depths.list[r],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,i,n):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var r=0,s=n.length;s>r;r++)e=n[r],i=e[1],this.options.stringParams?this.opcode("pushStringParam",i.stringModeValue,i.type):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,i=this.classifyMustache(t);"simple"===i?this.simpleMustache(t):"helper"===i?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,i){var n=t.id,r=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",r,s)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",n.length,r);else{if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",n.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id)},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var r=t.id.parts[0];n.knownHelpers[r]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}};var i=function(t){this.value=t};e.prototype={nameLookup:function(t,i){return/^[0-9]+$/.test(i)?t+"["+i+"]":e.isValidJavaScriptVariableName(i)?t+"."+i:t+"['"+i+"']"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,s=t.opcodes;for(this.i=0,a=s.length;a>this.i;this.i++)r=s[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args);return this.createFunctionContext(n)},nextOpcode:function(){var t=this.environment.opcodes;return t[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = helpers || "+e+".helpers;";this.environment.usePartial&&(i=i+" partials = partials || "+e+".partials;"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,s=this.environment.depths.list.length;s>r;r++)n.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(!this.isChild){var o=Handlebars.COMPILER_REVISION,l=Handlebars.REVISION_CHANGES[o];a="this.compilerInfo = ["+o+",'"+l+"'];\n"+a}if(t)return n.push(a),Function.apply(this,n);var c="function "+(this.name||"")+"("+n.join(",")+") {\n  "+a+"}";return Handlebars.log(Handlebars.logger.DEBUG,c+"\n\n"),c},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;n>i;i++){var r=this.source[i];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.source.push(this.appendToBuffer(this.quotedString(t)))},append:function(){this.flushInline();var t=this.popStack();this.source.push("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(t){this.push(this.nameLookup("data",t,"data"))},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&this.register("hashTypes","{"+t.types.join(",")+"}"),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(t,e,!0);this.push(i.name),this.replaceStack(function(t){return t+" ? "+t+".call("+i.callParams+") "+": helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+n+") { "+s+" = "+s+".call("+i.callParams+"); }"),this.source.push("else { "+s+" = "+r+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i=this.popStack();this.options.stringParams&&(e=this.popStack(),this.popStack());var n=this.hash;e&&n.types.push("'"+t+"': "+e),n.values.push("'"+t+"': ("+i+")")},compiler:e,compileChildren:function(t,e){for(var i,n,r=t.children,s=0,a=r.length;a>s;s++){i=r[s],n=new this.compiler;var o=this.matchExistingProgram(i);null==o?(this.context.programs.push(""),o=this.context.programs.length,i.index=o,i.name="program"+o,this.context.programs[o]=n.compile(i,e,this.context),this.context.environments[o]=i):(i.index=o,i.name="program"+o)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,r=[i.index,i.name,"data"],s=0,a=n.length;a>s;s++)e=n[s],1===e?r.push("depth0"):r.push("depth"+(e-1));return 0===n.length?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(t,e){this.useRegister(t),this.source.push(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.source.push(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n="",r=this.isInline();if(r){var s=this.popStack(!0);if(s instanceof i)e=s.value;else{var a=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(a)+" = "+s+"),",e=this.topStack()}}else e=this.topStack();var o=t.call(this,e);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+o+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+n+o+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var r=t[e];r instanceof i?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();return!t&&n instanceof i?n.value:(e||this.stackSlot--,n)},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof i?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(t,e,i){var n=[];this.setupParams(t,n,i);var r=this.nameLookup("helpers",e,"helper");return{params:n,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupParams:function(t,e,i){var n,r,s,a=[],o=[],l=[];a.push("hash:"+this.popStack()),r=this.popStack(),s=this.popStack(),(s||r)&&(s||(this.context.aliases.self="this",s="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),a.push("inverse:"+r),a.push("fn:"+s));for(var c=0;t>c;c++)n=this.popStack(),e.push(n),this.options.stringParams&&(l.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(a.push("contexts:["+o.join(",")+"]"),a.push("types:["+l.join(",")+"]"),a.push("hashTypes:hashTypes")),this.options.data&&a.push("data:data"),a="{"+a.join(",")+"}",i?(this.register("options",a),e.push("options")):e.push(a),e.join(", ")}};for(var n="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),r=e.RESERVED_WORDS={},s=0,a=n.length;a>s;s++)r[n[s]]=!0;e.isValidJavaScriptVariableName=function(t){return!e.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(t,e){if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=Handlebars.parse(t),n=(new Handlebars.Compiler).compile(i,e);return(new Handlebars.JavaScriptCompiler).compile(n,e)},Handlebars.compile=function(t,e){function i(){var i=Handlebars.parse(t),n=(new Handlebars.Compiler).compile(i,e),r=(new Handlebars.JavaScriptCompiler).compile(n,e,void 0,!0);return Handlebars.template(r)}if(!t||"string"!=typeof t&&t.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n;return function(t,e){return n||(n=i()),n.call(this,t,e)}},Handlebars.VM={template:function(t){var e={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(t,e,i){var n=this.programs[t];return i?Handlebars.VM.program(e,i):n?n:n=this.programs[t]=Handlebars.VM.program(e)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(i,n){n=n||{};var r=t.call(e,Handlebars,i,n.helpers,n.partials,n.data),s=e.compilerInfo||[],a=s[0]||1,o=Handlebars.COMPILER_REVISION;if(a!==o){if(o>a){var l=Handlebars.REVISION_CHANGES[o],c=Handlebars.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return r}},programWithDepth:function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(n,r){return r=r||{},t.apply(this,[n,r.data||e].concat(i))}},program:function(t,e){return function(i,n){return n=n||{},t(i,n.data||e)}},noop:function(){return""},invokePartial:function(t,e,i,n,r,s){var a={helpers:n,partials:r,data:s};if(void 0===t)throw new Handlebars.Exception("The partial "+e+" could not be found");if(t instanceof Function)return t(i,a);if(Handlebars.compile)return r[e]=Handlebars.compile(t,{data:void 0!==s}),r[e](i,a);throw new Handlebars.Exception("The partial "+e+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,Handlebars.registerHelper("math",function(t,e,i,n){return 4>arguments.length&&(n=i,i=e,e="+"),t=parseFloat(t),i=parseFloat(i),{"+":t+i,"-":t-i,"*":t*i,"/":t/i,"%":t%i}[e]}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return t}function i(t){return decodeURIComponent(t.replace(r," "))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(t):t}catch(e){}}var r=/\+/g,s=t.cookie=function(r,a,o){if(void 0!==a){if(o=t.extend({},s.defaults,o),"number"==typeof o.expires){var l=o.expires,c=o.expires=new Date;c.setDate(c.getDate()+l)}return a=s.json?JSON.stringify(a):a+"",document.cookie=[s.raw?r:encodeURIComponent(r),"=",s.raw?a:encodeURIComponent(a),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}for(var u=s.raw?e:i,h=document.cookie.split("; "),p=r?void 0:{},d=0,f=h.length;f>d;d++){var m=h[d].split("="),v=u(m.shift()),g=u(m.join("="));if(r&&r===v){p=n(g);break}r||(p[v]=n(g))}return p};s.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)?(t.cookie(e,"",t.extend(i,{expires:-1})),!0):!1}}),InitFragment=new JS.Class(Fragment,{initialize:function(){this.callSuper(),this.set("isAuth",!1)},setupMessageEvents:function(){var t=this;this.bindMessageEvent("requestRegister",function(){if(void 0==$.cookie("registerClient")){var e=utility.randomString(32);$.cookie("registerClient",e,{expires:365,path:"/"})}else $.cookie("registerClient",$.cookie("registerClient"),{expires:365,path:"/"});t.sendRemoteMessage("registerClient",{sessionId:$.cookie("registerClient")})}),this.bindMessageEvent("triviaUpdated",function(t){if(void 0!==modelCache.triviaList.home){var e=modelCache.triviaList.home.indexOfSelect(function(e){return e._id==t._id});-1!=e&&(modelCache.triviaList.home[e]=t)}}),this.bindMessageEvent("registerComplete",function(){t.set("isAuth",!0)})},setupVisual:function(){this.visualComplete()},setupComplete:function(){}}),HomeFragment=new JS.Class(Fragment,{setupVisual:function(){var t=this,e={trivias:this.get("trivias")};this.bindToTemplate("/assets/templates/trivia-list.html",templateCache,function(i){var n=i(e);$("#contentView").html(n),t.visualComplete()})},setupMessageEvents:function(){var t=this;this.bindMessageEvent("myTrivias",function(e){t.set("trivias",e),modelCache.triviaList.home=e,t.setupVisual()}),this.bindMessageEvent("registerComplete",function(){t.getTrivias()}),this.bindMessageEvent("triviaCreated",function(e){var i=[e].concat(t.get("trivias"));t.set("trivias",i),modelCache.triviaList.home=i,view.displayTriviaEdit(e._id),t.close()})},setupDOMEvents:function(){var t=this;this.bindDOMEvent(".edit-trivia","click",function(e){e.preventDefault();var i=$(this).attr("id"),n=t.get("trivias").select(function(t){return t._id==i})[0];view.displayTriviaEdit(n),t.close()}),this.bindDOMEvent(".delete-trivia","click",function(e){if(e.preventDefault(),confirm("Are you sure you would like to delete this trivia?")){var i=$(this).attr("id");t.deleteTrivia(i)}}),this.bindDOMEvent(".play-trivia","click",function(t){t.preventDefault();var e=$(this).attr("data-trivia-id");view.playTrivia(e)}),this.bindDOMEvent("#create-trivia-btn","click",function(e){e.preventDefault();var i=$.trim($("#trivia-name").val());if(""!=i){var n={triviaName:i};t.sendRemoteMessage("createTrivia",n)}else alert("Please insert a name")})},getTrivias:function(){void 0===modelCache.triviaList.home?this.sendRemoteMessage("getMyTrivias",{}):this.sendLocalMessage("myTrivias",modelCache.triviaList.home)},deleteTrivia:function(t){var e=this.get("trivias").select(function(e){return e._id!=t});this.set("trivias",e),modelCache.triviaList.home=e,this.bindTrivia(),this.sendRemoteMessage("removeTrivia",{triviaId:t})},bindTrivia:function(t){var e=this,i={trivias:this.get("trivias")};this.bindToTemplate("/assets/templates/trivia-list.html",templateCache,function(n){var r=Mustache.render(n,i);$("#contentView").html(r),void 0!==t&&1==t&&e.visualComplete()})}}),EditFragment=new JS.Class(Fragment,{setupVisual:function(){var t=this;$("title").html(this.get("trivia").triviaName),$("#title").html(this.get("trivia").triviaName),this.bindToTemplates(["/assets/templates/trivia-edit.html","/assets/templates/question.html","/assets/templates/edit-region.html"],templateCache,function(e){var i=t.get("trivia"),n=e[0](i);$("#contentView").html(n),$("#questionArea").html(e[1]({})),$(".question-box").html(e[2]({})),t.set("currQuestionIndex",i.questions.length),t.visualComplete()
})},bindToQuestionIndex:function(t){var e=this.get("trivia");if(this.clearForm(),$("#delete").hide(),void 0!==e.questions[t]){$("#delete").show(),$(".is-correct").attr("checked",!1),$("#question-text").val(e.questions[t].question);for(var i=0;e.questions[t].choices.length>i;i++){var n=e.questions[t].choices[i].answer,r=!1;void 0!==n&&(r=e.questions[t].answers.select(function(t){return t.answer==n}).length>0),$(".question-box").eq(i).find(".question-edit").html(n),r&&$(".question-box").eq(i).find(".is-correct").trigger("click")}}},setupMessageEvents:function(){var t=this;this.bindMessageEvent("myTrivia",function(e){e._id==t.get("triviaId")&&(t.set("trivia",e),t.setupVisual())}),this.bindMessageEvent("registerComplete",function(){t.getTrivia()}),this.bindMessageEvent("triviaUpdated",function(e){t.set("trivia",e),t.bindToTemplates(["/assets/templates/trivia-edit.html","/assets/templates/question.html","/assets/templates/edit-region.html"],templateCache,function(e){var i=t.get("trivia"),n=Handlebars.compile(e[0])(i);$("#contentView").html(n),$("#questionArea").html(e[1]),$(".question-box").html(e[2]),t.bindToQuestionIndex(t.get("currQuestionIndex"))})})},setupDOMEvents:function(){var t=this;this.bindDOMEvent("#save","click",function(e){e.preventDefault();var i=t.readGrid();i.questionIndex=t.get("currQuestionIndex"),null==i.question?alert("Please enter a question!"):t.sendRemoteMessage("updateTrivia",{triviaId:t.get("trivia")._id,update:i})}),this.bindDOMEvent("#delete","click",function(e){e.preventDefault(),t.sendRemoteMessage("removeQuestion",{triviaId:t.get("trivia")._id,questionIndex:t.get("currQuestionIndex")});var i=t.get("trivia");i.questions.splice(t.get("currQuestionIndex"),1),t.set("currQuestionIndex",i.questions.length)}),this.bindDOMEvent(".question-page","click",function(e){e.preventDefault();var i=$(this).attr("id");t.set("currQuestionIndex",i),t.bindToQuestionIndex(i)}),this.bindDOMEvent("#new-question","click",function(e){e.preventDefault();var i=t.get("trivia");t.set("currQuestionIndex",i.questions.length),t.bindToQuestionIndex(i.questions.length)})},clearForm:function(){$(".question-edit").html(""),$("#question-text").val(""),$(".is-correct").attr("checked",!1)},getTrivia:function(){void 0===modelCache.trivia[this.getTriviaId]?this.sendRemoteMessage("getMyTriviaByTriviaId",{triviaId:this.get("triviaId")}):this.sendLocalMessage("myTrivia",modelCache.trivia[this.getTriviaId])},readGrid:function(){var t={};$(".boxy").each(function(e){var i=$.trim($(this).find(".question-edit").val());""!=i&&(t[e]={value:i,isCorrect:$(this).find("input[name=is-correct]").is(":checked")})});var e=$.trim($("#question-text").val());""==e&&(e=null);var i={items:t,question:e};return i}}),PlayFragment=new JS.Class(Fragment,{setupVisual:function(){var t=this;t.set("numPlayers",0),this.bindToTemplate("/assets/templates/trivia-play.html",templateCache,function(e){var i=Mustache.render(e,view);$("#contentView").html(i),t.visualComplete()})},setupMessageEvents:function(){var t=this;this.bindMessageEvent("guestJoinedTrivia",function(){var e=t.get("numPlayers")+1;t.set("numPlayers",e),$("#numberOfPlayers").html(e)})}});var ApplicationRouter=Backbone.Router.extend({routes:{"":"home","trivia/:id/edit/":"editTrivia","trivia/:id/play/":"playTrivia","trivia/add":"createTrivia"},home:function(){$("title").html("My Trivia"),$("#title").html("My Trivia");var t=new HomeFragment(locBroadcaster,remoteSender);t.setupMessageEvents(),initFragment.get("isAuth")&&t.getTrivias()},createTrivia:function(){var t=new CreateFragment(locBroadcaster,remoteSender);t.setup(),$("title").html("Create Trivia")},editTrivia:function(t){var e=new EditFragment(locBroadcaster,remoteSender);e.set("triviaId",t),e.setupMessageEvents(),initFragment.get("isAuth")&&e.getTrivia()},playTrivia:function(t){playFragment=new PlayFragment(locBroadcaster,remoteSender),playFragment.set("triviaId",t),playFragment.sendRemoteMessage("playerJoined",{triviaId:t}),playFragment.setup()},updateTrivia:function(){}}),ApplicationView=Backbone.View.extend({initialize:function(){this.router=new ApplicationRouter,Backbone.history.start({pushState:!0})},displayHome:function(){this.router.navigate("home",!0)},playTrivia:function(t){this.router.navigate("trivia/"+t+"/play/",!0)},displayTriviaEdit:function(t){var e;"string"!=typeof t?(modelCache.trivia[this._id]=t,e=t._id):e=t,this.router.navigate("trivia/"+e+"/edit/",!0)}});window.Modernizr=function(t,e,i){function n(t){f.cssText=t}function r(t,e){return typeof t===e}var s,a,o,l="2.6.2",c={},u=!0,h=e.documentElement,p="modernizr",d=e.createElement(p),f=d.style,m={}.toString,v=" -webkit- -moz- -o- -ms- ".split(" "),g={svg:"http://www.w3.org/2000/svg"},_={},y=[],S=y.slice,b=function(t,i,n,r){var s,a,o,l,c=e.createElement("div"),u=e.body,d=u||e.createElement("body");if(parseInt(n,10))for(;n--;)o=e.createElement("div"),o.id=r?r[n]:p+(n+1),c.appendChild(o);return s=["&#173;",'<style id="s',p,'">',t,"</style>"].join(""),c.id=p,(u?c:d).innerHTML+=s,d.appendChild(c),u||(d.style.background="",d.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),a=i(c,t),u?c.parentNode.removeChild(c):(d.parentNode.removeChild(d),h.style.overflow=l),!!a},k=function(e){var i=t.matchMedia||t.msMatchMedia;if(i)return i(e).matches;var n;return b("@media "+e+" { #"+p+" { position: absolute; } }",function(e){n="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),n},x={}.hasOwnProperty;o=r(x,"undefined")||r(x.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return x.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=S.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=e.prototype;var s=new r,a=e.apply(s,i.concat(S.call(arguments)));return Object(a)===a?a:s}return e.apply(t,i.concat(S.call(arguments)))};return n}),_.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:b(["@media (",v.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){i=9===t.offsetTop}),i},_.svg=function(){return!!e.createElementNS&&!!e.createElementNS(g.svg,"svg").createSVGRect},_.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==g.svg},_.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(m.call(e.createElementNS(g.svg,"clipPath")))};for(var w in _)o(_,w)&&(a=w.toLowerCase(),c[a]=_[w](),y.push((c[a]?"":"no-")+a));return c.addTest=function(t,e){if("object"==typeof t)for(var n in t)o(t,n)&&c.addTest(n,t[n]);else{if(t=t.toLowerCase(),c[t]!==i)return c;e="function"==typeof e?e():e,u!==void 0&&u&&(h.className+=" "+(e?"":"no-")+t),c[t]=e}return c},n(""),d=s=null,function(t,e){function i(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var t=g.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=v[t[f]];return e||(e={},m++,t[f]=m,v[m]=e),e}function s(t,i,n){if(i||(i=e),u)return i.createElement(t);n||(n=r(i));var s;return s=n.cache[t]?n.cache[t].cloneNode():d.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),s.canHaveChildren&&!p.test(t)?n.frag.appendChild(s):s}function a(t,i){if(t||(t=e),u)return t.createDocumentFragment();i=i||r(t);for(var s=i.frag.cloneNode(),a=0,o=n(),l=o.length;l>a;a++)s.createElement(o[a]);return s}function o(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(i){return g.shivMethods?s(i,t,e):e.createElem(i)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(g,e.frag)}function l(t){t||(t=e);var n=r(t);return g.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!i(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),u||o(t,n),t}var c,u,h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",m=0,v={};(function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return t.cloneNode===void 0||t.createDocumentFragment===void 0||t.createElement===void 0}()}catch(i){c=!0,u=!0}})();var g={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:u,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:s,createDocumentFragment:a};t.html5=g,l(e)}(this,e),c._version=l,c._prefixes=v,c.mq=k,c.testStyles=b,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(u?" js "+y.join(" "):""),c}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==v.call(t)}function r(t){return"string"==typeof t}function s(){}function a(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function o(){var t=g.shift();_=1,t?t.t?f(function(){("c"==t.t?p.injectCss:p.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),o()):_=0}function l(t,i,n,r,s,l,c){function u(e){if(!d&&a(h.readyState)&&(y.r=d=1,!_&&o(),h.onload=h.onreadystatechange=null,e)){"img"!=t&&f(function(){b.removeChild(h)},50);for(var n in J[i])J[i].hasOwnProperty(n)&&J[i][n].onload()}}var c=c||p.errorTimeout,h=e.createElement(t),d=0,v=0,y={t:n,s:i,e:s,a:l,x:c};1===J[i]&&(v=1,J[i]=[]),"object"==t?h.data=i:(h.src=i,h.type=t),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){u.call(this,v)},g.splice(r,0,y),"img"!=t&&(v||2===J[i]?(b.insertBefore(h,S?null:m),f(u,c)):J[i].push(h))}function c(t,e,i,n,s){return _=0,e=e||"j",r(t)?l("c"==e?x:k,t,e,this.i++,i,n,s):(g.splice(this.i++,0,t),1==g.length&&o()),this}function u(){var t=p;return t.loader={load:c,i:0},t}var h,p,d=e.documentElement,f=t.setTimeout,m=e.getElementsByTagName("script")[0],v={}.toString,g=[],_=0,y="MozAppearance"in d.style,S=y&&!!e.createRange().compareNode,b=S?d:m.parentNode,d=t.opera&&"[object Opera]"==v.call(t.opera),d=!!e.attachEvent&&!d,k=y?"object":d?"script":"img",x=d?"script":k,w=Array.isArray||function(t){return"[object Array]"==v.call(t)},E=[],J={},T={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};p=function(t){function e(t){var e,i,n,t=t.split("!"),r=E.length,s=t.pop(),a=t.length,s={url:s,origUrl:s,prefixes:t};for(i=0;a>i;i++)n=t[i].split("="),(e=T[n.shift()])&&(s=e(s,n));for(i=0;r>i;i++)s=E[i](s);return s}function a(t,r,s,a,o){var l=e(t),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=n(r)?r:r[t]||r[a]||r[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,r,s,a,o):(J[l.url]?l.noexec=!0:J[l.url]=1,s.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(n(r)||n(c))&&s.load(function(){u(),r&&r(l.origUrl,o,a),c&&c(l.origUrl,o,a),J[l.url]=2})))}function o(t,e){function i(t,i){if(t){if(r(t))i||(h=function(){var t=[].slice.call(arguments);p.apply(this,t),d()}),a(t,h,e,0,c);else if(Object(t)===t)for(l in o=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(l)&&(!i&&!--o&&(n(h)?h=function(){var t=[].slice.call(arguments);p.apply(this,t),d()}:h[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),d()}}(p[l])),a(t[l],h,e,l,c))}else!i&&d()}var o,l,c=!!t.test,u=t.load||t.both,h=t.callback||s,p=h,d=t.complete||s;i(c?t.yep:t.nope,!!u),u&&i(u)}var l,c,h=this.yepnope.loader;if(r(t))a(t,0,h,0);else if(w(t))for(l=0;t.length>l;l++)c=t[l],r(c)?a(c,0,h,0):w(c)?p(c):Object(c)===c&&o(c,h);else Object(t)===t&&o(t,h)},p.addPrefix=function(t,e){T[t]=e},p.addFilter=function(t){E.push(t)},p.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",h=function(){e.removeEventListener("DOMContentLoaded",h,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=o,t.yepnope.injectJs=function(t,i,n,r,l,c){var u,h,d=e.createElement("script"),r=r||p.errorTimeout;d.src=t;for(h in n)d.setAttribute(h,n[h]);i=c?o:i||s,d.onreadystatechange=d.onload=function(){!u&&a(d.readyState)&&(u=1,i(),d.onload=d.onreadystatechange=null)},f(function(){u||(u=1,i(1))},r),l?d.onload():m.parentNode.insertBefore(d,m)},t.yepnope.injectCss=function(t,i,n,r,a,l){var c,r=e.createElement("link"),i=l?o:i||s;r.href=t,r.rel="stylesheet",r.type="text/css";for(c in n)r.setAttribute(c,n[c]);a||(m.parentNode.insertBefore(r,m),f(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ie8compat",function(){return!window.addEventListener&&document.documentMode&&7===document.documentMode}),templateCache={},templateCache["/assets/templates/edit-region.html"]=Handlebars.compile('<div class="panel boxy"><textarea class="question-edit"></textarea><input type="checkbox" class="is-correct" name="is-correct" value="#" /></div>'),templateCache["/assets/templates/edit.html"]=Handlebars.compile("{{#questions}}{{name}}{{/questions}}"),templateCache["/assets/templates/question.html"]=Handlebars.compile('<div class="row collapse"><div class="large-2 columns"><span class="prefix">Trivia</span></div><div class="large-10 columns"><input type="text" id="question-text" placeholder="Enter a Trivia Question"></div><hr /></div><div class="row"><div class="question-box small-4 columns"></div><div class="question-box large-4 columns"></div><div class="question-box large-4 columns"></div></div><div class="row"><div class="question-box large-4 columns"></div><div class="question-box large-4 columns"></div><div class="question-box large-4 columns"></div></div>'),templateCache["/assets/templates/trivia-edit.html"]=Handlebars.compile('<div class="row"><div class="large-8 large-offset-2"><div class="row collapse"><div class="large-4 columns"><h3 id="title">{{triviaName}}</h3></div></div><div class="row"><div class="large-12"><div id="questionArea"></div></div></div><div class="row"><div class="large-4 columns"><a href="#" id="save" class="small button">Save</a><a href="#" id="delete" class="small button alert">Delete</a></div><div class="large-8 columns"><div id="question-list-cont"><a id="new-question" href="#">New Question</a><ul id="question-list">{{#each questions}}<li><a class="question-page" href="#" id="{{@index}}">{{math @index 1}}</a></li>{{/each}}</ul></div></div></div></div></div>'),templateCache["/assets/templates/trivia-list.html"]=Handlebars.compile('<div class="row"><div class="large-8 large-offset-2"><div class="row collapse"><div class="large-4 columns"><h3 id="title">Your Games</h3></div><div id="create-form"><div class="large-4 large-offset-3 columns"><input type="text" id="trivia-name" name="trivia-name" placeholder="Create your own Trivia!"></div><div class="large-1 columns"><a href="#" id="create-trivia-btn" class="button prefix">Go!</a></div></div></div><div class="row"><div class="large-12"><div class="panel"><table width="100%" id="trivia-list"><tr><td>Trivia Name</td><td># of Questions</td><td>Edit</td><td>Delete</td><td>Play Game</td></tr>{{#trivias}}<tr><td>{{triviaName}}</td><td>{{questions.length}}</td><td><a id="{{_id}}" class="edit-trivia" href="#">Edit</a></td><td><a id="{{_id}}" class="delete-trivia" href="#">Delete</a></td><td><a data-trivia-id="{{_id}}" class="play-trivia" href="#">Play</a></td></tr>{{/trivias}}</table></div></div></div></div></div>'),templateCache["/assets/templates/trivia-play.html"]=Handlebars.compile('<div id="play">Number of Players<div id="numberOfPlayers">0</div></div>'),templateCache["/assets/templates/trivia.html"]=Handlebars.compile('<div id="contentTrivia" class="contentBlock"><form id="trivia-game" class="type-{{action}}"><label>Trivia Title</label><input type="text" name="triviaName" value="{{triviaName}}" /><input type="submit" name="submit" value="Submit" /></form></div>'),$(document).ready(function(){utility=new Utility;var t=io.connect("http://localhost:8080");remoteSender=function(e,i){t.emit(e,i)},"undefined"==typeof templateCache&&(templateCache={}),modelCache={trivia:{},triviaList:{}},locBroadcaster=new LocalBroadcaster,t.on("message",function(t){console.log(t),locBroadcaster.notifyObservers({messageKey:t.messageKey,data:t.data,isLocal:!1})}),initFragment=new InitFragment(locBroadcaster,remoteSender),initFragment.setup(),initFragment.sendRemoteMessage("reRegister",{}),view=new ApplicationView});]]></script>
  </head>
  <body/>
</html>
