<!doctype html>
<html lang="en">
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width" />
	<title></title>
	<head>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
		<script src="/assets/js/array.js"></script>
		<script src="/assets/js/underscore-min.js"></script>
		<script src="/assets/js/backbone-min.js"></script>
		<script src="/socket.io/socket.io.js"></script>
		<script src="/assets/js/mustache.js"></script>
		<script src="/assets/js/handlebars.js"></script>
		<script src="/assets/js/handlebars-helpers.js"></script>
		<script type="text/javascript">JSCLASS_PATH = '/assets/js/jsclass-min'</script>
		<script type="text/javascript" src="/assets/js/jsclass-min/loader-browser.js"></script>
		<script src="/assets/js/jquery.cookie.js"></script>
		<script src="/assets/js/fragment.js"></script>

		<script src="/assets/js/fragments/init.js"></script>
		<script src="/assets/js/fragments/home.js"></script>
		<script src="/assets/js/fragments/edit.js"></script>
		<script src="/assets/js/fragments/play.js"></script>
		<script src="/assets/js/router.js"></script>

		<link rel="stylesheet" href="/assets/zurb/css/normalize.css" />
		<link rel="stylesheet" href="/assets/zurb/css/foundation.css" />
		<script src="/assets/zurb/js/vendor/custom.modernizr.js"></script>

		<link rel="stylesheet" type="text/css" media="all" href="/assets/css/main.css" />

		<!--[if lt IE 9]>
      	<script src="/assets/js/html5.js"></script>
    	<![endif]-->
		<script type="text/javascript"> 
			$(document).ready(function() {
				JS.require('JS.Observable', function() {
					
					var utility = new Utility();
					var socket = io.connect('http://localhost:8080');
					//var socket = io.connect('http://4d5i.localtunnel.com:80')
					remoteSender = function(key, data) {
						socket.emit(key, data);
					};		
					templateCache = { };
					modelCache =  { trivia : { }, triviaList : { } };

					locBroadcaster = new LocalBroadcaster();
					socket.on('message', function(data){
						console.log(data);
						locBroadcaster.notifyObservers({ messageKey : data.messageKey, data : data.data, isLocal : false });
					});
					
					initFragment = new InitFragment(locBroadcaster, remoteSender);
					initFragment.setup();
					initFragment.sendRemoteMessage('reRegister', { });
					
					view = new ApplicationView();
				});
			});
		</script>
	</head>
	<body>
		<div id="contentView"></div>	
	</body>

</html>
